<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head.ejs') %>
    <link rel="stylesheet" href="/static/new.css" />
    <script defer>
        const createTextBox = () => {
            const $newInputs = $("#newInputs");
          const newDiv = $("<div></div>");
          newDiv.html(
            "<input type='text' name='ingredients[]' id='newInputBox'>"
          );
          $newInputs.append(newDiv);
        };
        const createTextBox2 = () => {
            const $newInputs2 = $("#newInputs2");
          const newDiv2 = $("<div></div>");
          newDiv2.html(
            "<input type='text' name='instructions[]' id='newInputBox2'>"
          );
          $newInputs2.append(newDiv2);
        };

        // Function to Load the file
        const loadFile = (event) => {
	let imgURL = URL.createObjectURL(event.target.files[0]);

};
      </script>
  </head>
  <body>
    <%- include('../partials/header.ejs') %>
    <h1>Recipes</h1>

    <main>
      <section>
        <form action="/recipes" onsubmit="loadFile(event)" method="POST">
          <fieldset>
            <legend>Create a new Recipe</legend>

            <label>
              Name:
              <input
                type="text"
                name="name"
                placeholder="enter a recipe name"
              /> </label
            ><br />
            <label>
              Upload Image:
              <input type="file" accept="image/*" name="image" id="imgFile">
            </label>
            <br/>
            <label>
              Ingredients:
              <input
                type="text"
                name="ingredients[]"
                placeholder="enter an ingredient"
              />
            </label>
            <div id="newInputs"></div>
            <div id="dynamicCheck">
              <input
                type="button"
                value="Add Ingredient"
                onclick="createTextBox()"
              />
            </div>
            
            <br />
            <label>
              Instructions:
              <input
                type="text"
                name="instructions[]"
                placeholder="add step"
              /> 
              </label>
              <div id="newInputs2"></div>
              <div id="dynamicCheck2">
                <input
                  type="button"
                  value="Add Step"
                  onclick="createTextBox2()"
                />
              </div>
              
            <br />
            <label>
              Difficulty:
              <select name="difficulty" id="difficulty">
                <option value="Easy">Easy</option>
                <option value="Medium">Medium</option>
                <option value="Hard">Hard</option>
              </select>
            </label>
            <!-- ---------------------------------------------- -->
            <section class="allergies">
              <label>
                Gluten-Free:
                <input type="checkbox" name="allergyFree[gluten]" />
              </label>
              <label>
                Dairy-Free: <input type="checkbox" name="allergyFree[dairy]" />
              </label>
              <label>
                Tree Nut-Free:
                <input type="checkbox" name="allergyFree[treeNut]" />
              </label>
              <label>
                Egg-Free: <input type="checkbox" name="allergyFree[egg]" />
              </label>
              <label>
                Nut-Free: <input type="checkbox" name="allergyFree[nuts]" />
              </label>
              <label>
                Fish-Free: <input type="checkbox" name="allergyFree[fish]" />
              </label>
              <label>
                Shellfish-Free:
                <input type="checkbox" name="allergyFree[shellfish]" />
              </label>
              <label>
                Soy-Free: <input type="checkbox" name="allergyFree[soy]" />
              </label>
              <label>
                Sesame Seeds-Free:
                <input type="checkbox" name="allergyFree[sesameSeeds]" />
              </label>
              <label>
                Vegan: <input type="checkbox" name="allergyFree[vegan]" />
              </label>
              <label>
                Vegetarian:
                <input type="checkbox" name="allergyFree[vegetarian]" />
              </label>
              <label>
                Keto: <input type="checkbox" name="allergyFree[keto]" />
              </label>
            </section>
          </fieldset>

          <input type="submit" value="Add Recipe" />
        </form>
      </section>
    </main>
    
  </body>
</html>
