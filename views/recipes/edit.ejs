<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head.ejs') %>
    <link rel="stylesheet" href="/static/edit.css" />
    <script defer>
        const createTextBox = () => {
            const $newInputs = $("#newInputs");
          const newDiv = $("<div></div>");
          newDiv.html(
            "<input type='text' name='ingredients[]' id='newInputBox'>"
          );
          $newInputs.append(newDiv);
        };
        const createTextBox2 = () => {
            const $newInputs2 = $("#newInputs2");
          const newDiv2 = $("<div></div>");
          newDiv2.html(
            "<input type='text' name='instructions[]' id='newInputBox2'>"
          );
          $newInputs2.append(newDiv2);
        };

        if(recipe.difficulty == "Medium"){
                const $medium = $("#medium")
                $medium.html("<option value='Medium' id='medium' selected='selected'>Medium</option>") 
                }
      </script>
  </head>
  <body>
    <%- include('../partials/header.ejs') %>
    <h1>Recipes</h1>

    <main>
      <section>
        <form action="/recipes" method="POST">
          <fieldset>
            <legend>Edit <%=recipe.name %></legend>

            <label>
              Name:
              <input
                type="text"
                name="name"
                placeholder="enter a recipe name"
                value="<%=recipe.name %>"
              /> </label
            ><br />
            <label>
              Ingredients:
              <input
                type="text"
                name="ingredients[]"
                placeholder="enter an ingredient"
              />
            </label>
            <div id="dynamicCheck">
              <input
                type="button"
                value="Add Ingredient"
                onclick="createTextBox()"
              />
            </div>
            <div id="newInputs"></div>
            <br />
            <label>
              Instructions:
              <input
                type="text"
                name="instructions[]"
                placeholder="add step"
              /> 
              </label>
              <div id="dynamicCheck2">
                <input
                  type="button"
                  value="Add Step"
                  onclick="createTextBox2()"
                />
              </div>
              <div id="newInputs2"></div>
            <br />
            <label>
              Difficulty:
              
              <select name="difficulty" id="difficulty">
                <option value="Easy" >Easy</option>
                <option value="Medium" id="medium">Medium</option>
                <option value="Hard">Hard</option>
              </select>
            </label>
            <!-- ---------------------------------------------- -->
            <section class="allergies">
              <label>
                Gluten-Free:
                <input type="checkbox" name="allergyFree[gluten]" <%=recipe.allergyFree.gluten ? "checked" : "" %>/>
              </label>
              <label>
                Dairy-Free: <input type="checkbox" name="allergyFree[dairy]" <%=recipe.allergyFree.dairy ? "checked" : "" %>/>
              </label>
              <label>
                Tree Nut-Free:
                <input type="checkbox" name="allergyFree[treeNut]" <%=recipe.allergyFree.treeNut ? "checked" : "" %>/>
              </label>
              <label>
                Egg-Free: <input type="checkbox" name="allergyFree[egg]" <%=recipe.allergyFree.egg ? "checked" : "" %>/>
              </label>
              <label>
                Nut-Free: <input type="checkbox" name="allergyFree[nuts]" <%=recipe.allergyFree.nuts ? "checked" : "" %>/>
              </label>
              <label>
                Fish-Free: <input type="checkbox" name="allergyFree[fish]" <%=recipe.allergyFree.fish ? "checked" : "" %>/>
              </label>
              <label>
                Shellfish-Free:
                <input type="checkbox" name="allergyFree[shellfish]" <%=recipe.allergyFree.shellfish ? "checked" : "" %>/>
              </label>
              <label>
                Soy-Free: <input type="checkbox" name="allergyFree[soy]" <%=recipe.allergyFree.soy ? "checked" : "" %>/>
              </label>
              <label>
                Sesame Seeds-Free:
                <input type="checkbox" name="allergyFree[sesameSeeds]" <%=recipe.allergyFree.sesameSeeds ? "checked" : "" %>/>
              </label>
              <label>
                Vegan: <input type="checkbox" name="allergyFree[vegan]" <%=recipe.allergyFree.vegan ? "checked" : "" %>/>
              </label>
              <label>
                Vegetarian:
                <input type="checkbox" name="allergyFree[vegetarian]" <%=recipe.allergyFree.vegetarian ? "checked" : "" %>/>
              </label>
              <label>
                Keto: <input type="checkbox" name="allergyFree[keto]" <%=recipe.allergyFree.keto ? "checked" : "" %>/>
              </label>
            </section>
          </fieldset>

          <input type="submit" value="Add Recipe" />
        </form>
      </section>
    </main>
    
  </body>
</html>